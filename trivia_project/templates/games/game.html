{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div id="alert-container"></div>

    <div class="card">
        <div class="card-header">
            <h2>Trivia Game</h2>
            <div id="game-status"></div>
        </div>
        
        <div class="card-body">
            <div id="game-container">
                {% if user.is_authenticated %}
                    <button id="start-game" class="btn btn-primary">Comenzar Juego</button>
                {% else %}
                    <p>Por favor <a href="{% url 'login' %}">inicia sesión</a> para jugar.</p>
                {% endif %}
            </div>

            <div id="question-container"></div>
            
            <form id="answer-form" style="display: none;">
                {% csrf_token %}
                <div id="answer-container"></div>
                <button type="submit" class="btn btn-primary mt-3">Enviar Respuesta</button>
            </form>
        </div>
    </div>
</div>

{% if user.is_authenticated %}
<script>
    // Guardar el token en localStorage si no está guardado
    if (!localStorage.getItem('authToken')) {
        localStorage.setItem('authToken', '{{ user.auth_token.key }}');
    }
</script>
{% endif %}

<script src="{% static 'js/game.js' %}"></script>
{% endblock %}